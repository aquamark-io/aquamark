<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>API</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <link rel="icon" href="/logo-icon-black-blue.jpg" type="image/jpg">
  <style>
    :root {
      --primary-color: #000000;
      --primary-light: #f3e8ff;
      --primary-dark: #4d2c91;
      --accent-color: #007bff;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --danger-color: #ef4444;
      --text-primary: #1e1e2f;
      --text-secondary: #64748b;
      --bg-color: #f8f9fb;
      --card-bg: #ffffff;
      --border-color: #e2e8f0;
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --radius: 12px;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-color);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Keeping original header styles */
    .aqua-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background: #f3e8ff;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .aqua-logo {
      height: 32px;
    }
    
    .aqua-nav a {
      margin-left: 2rem;
      text-decoration: none;
      font-weight: 500;
      color: #1e1e2f;
    }
    
    .aqua-nav a:hover,
    .aqua-nav a.active {
      color: #007bff;
    }
    
    /* Updated main panel styling */
    .aqua-panel {
      max-width: 1000px;
      width: 95%;
      margin: 2rem auto;
      background: var(--card-bg);
      padding: 2.5rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow-md);
      flex: 1;
    }
    
    h1 {
      font-size: 2rem;
      margin-bottom: 1.5rem;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
    }
    
    h2 {
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      font-size: 1.5rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.5rem;
    }
    
    h3 {
      margin-top: 1.5rem;
      margin-bottom: 0.75rem;
      font-size: 1.2rem;
      color: var(--text-primary);
    }
    
    p {
      margin-bottom: 1rem;
      line-height: 1.6;
      color: var(--text-secondary);
    }
    
    pre {
      background: #f8fafc;
      padding: 1.25rem;
      overflow-x: auto;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      margin: 1.25rem 0;
    }
    
    code {
      font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
      color: #e53935;
      font-size: 0.9rem;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: var(--shadow-sm);
    }
    
    thead {
      background-color: var(--primary-light);
    }
    
    th {
      padding: 0.875rem;
      text-align: left;
      font-weight: 600;
      color: var(--primary-dark);
    }
    
    td {
      padding: 0.875rem;
      border-top: 1px solid var(--border-color);
      color: var(--text-secondary);
    }
    
    tr:nth-child(even) {
      background-color: #fafbfc;
    }
    
    ul {
      margin: 1rem 0 1.5rem 1.5rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }
    
    li {
      margin-bottom: 0.5rem;
    }
    
    /* API method badges */
    .api-method {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 50px;
      font-weight: 600;
      font-size: 0.8rem;
      margin-right: 0.5rem;
      background: var(--accent-color);
      color: white;
    }
    
    /* Footer - keep original */
    footer {
      background: #f3e8ff;
      padding: 1.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 3rem;
    }
    
    .footer-nav a {
      color: #1e1e2f;
      text-decoration: none;
      margin-right: 1.5rem;
    }
    
    .footer-nav a:hover {
      color: #007bff;
    }

    /* Response status indicators */
    .status-success {
      color: var(--success-color);
      font-weight: 500;
    }
    
    .status-error {
      color: var(--danger-color);
      font-weight: 500;
    }
    
    @media (max-width: 768px) {
      .aqua-panel {
        padding: 1.5rem;
      }
      
      h1 {
        font-size: 1.75rem;
      }
      
      h2 {
        font-size: 1.35rem;
      }
      
      pre {
        padding: 1rem;
      }
    }
  </style>
</head>

<body>
  <!-- Original header preserved -->
  <header class="aqua-header">
    <img src="/logo-full-black-blue.png" alt="Aquamark Logo" class="aqua-logo">
    <nav class="aqua-nav">
      <a href="/dashboard.html">Dashboard</a>
      <a href="/watermark.html">Watermark</a>
      <a href="/api.html" class="active">API Docs</a>
      <a href="/login.html">Log Out</a>
    </nav>
  </header>

<!-- Updated main content -->
<main class="aqua-panel">
  <h1>API Documentation</h1>
  <p>Watermark seamlessly in seconds.</p>

  <p><strong>Important:</strong> Upload one PDF at a time. Each request should include a single file for accurate tracking.</p>

  <h2>üîê Authentication</h2>
  <p>Contact <a href="mailto:hey@aquamark.io">hey@aquamark.io</a> to request your API key.</p>
  <pre><code>Authorization: Bearer YOUR_API_KEY</code></pre>

  <h2>üì• Endpoint: Watermark PDFs</h2>
  <p><strong>URL:</strong> https://aquamark-decrypt.onrender.com/watermark</p>
  <p>If you're tracking submissions by lender, make sure to set the <code>lender</code> value before sending each file to Aquamark. To minimize storage clutter, most users send the protected file to the lender and then delete it‚Äîretaining only the original, unmarked version for internal use.</p>


  <table>
    <thead>
      <tr><th>Field</th><th>Type</th><th>Required</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td>user_email</td><td>string</td><td>Yes</td><td>Your Aquamark account email</td></tr>
      <tr><td>file</td><td>file</td><td>Yes</td><td>One PDF file (max 25MB)</td></tr>
      <tr><td>lender</td><td>string</td><td>No</td><td>Optional lender name to embed on the document</td></tr>
     <tr><td>salesperson</td><td>string</td><td>No</td><td>Optional salesperson name to embed in the QR code</td></tr>
     <tr><td>processor</td><td>string</td><td>No</td><td>Optional processor name to embed in the QR code</td></tr>

    </tbody>
  </table>

  <h3>cURL</h3>
  <pre><code>curl -X POST "https://aquamark-decrypt.onrender.com/watermark" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -F "user_email=john@example.com" \
  -F "file=@statement1.pdf" \
  -F "lender=Fora Financial" \
  -F "salesperson=Jen Lee" \
  -F "processor=Tyler Wong" \
  --output "statement1 - protected.pdf"
</code></pre>

  <h2>üì´ Postman Setup</h2>
  <ul>
    <li><strong>Method:</strong> POST</li>
    <li><strong>URL:</strong> <code>https://aquamark-decrypt.onrender.com/watermark</code></li>
    <li><strong>Headers:</strong> <code>Authorization: Bearer YOUR_API_KEY</code></li>
    <li><strong>Body Type:</strong> form-data</li>
    <li><strong>Body Fields:</strong>
      <ul>
        <li><code>user_email</code> (text) ‚Äì your Aquamark account email</li>
        <li><code>file</code> (file) ‚Äì upload your PDF file</li>
        <li><code>lender</code> (text, optional) ‚Äì name of lender to embed</li>
        <li><code>salesperson</code> (text, optional) ‚Äì name of salesperson to include in QR code</li>
        <li><code>processor</code> (text, optional) ‚Äì name of processor to include in QR code</li>
      </ul>
    </li>
  </ul>

  <h2>‚úÖ Successful Response</h2>
  <pre><code>[Returns a protected PDF file]</code></pre>

  <h2>‚ùó Error Responses</h2>
  <table>
    <thead>
      <tr><th>Code</th><th>Message</th></tr>
    </thead>
    <tbody>
      <tr><td><span class="status-error">401</span></td><td>Invalid API key</td></tr>
      <tr><td><span class="status-error">403</span></td><td>User not on Enterprise plan</td></tr>
      <tr><td><span class="status-error">422</span></td><td>No logo stored for this user</td></tr>
      <tr><td><span class="status-error">429</span></td><td>Usage limit exceeded</td></tr>
      <tr><td><span class="status-error">500</span></td><td>Internal error</td></tr>
    </tbody>
  </table>

  <h2>üìù Notes</h2>
  <ul>
    <li>You must be on the Enterprise plan to access the API.</li>
    <li>PDF only. One file per request.</li>
    <li>Upload your watermark logo in the Aquamark portal before using the API.</li>
    <li>Questions? Email <a href="mailto:hey@aquamark.io">hey@aquamark.io</a></li>
  </ul>
</main>

  <!-- Original footer preserved -->
  <footer>
    <img src="/logo-full-black-blue.png" alt="Aquamark Logo" class="footer-logo" height="24">
    <div class="footer-nav">
      <a href="/terms.html">Terms of Service</a>
      <a href="/privacy.html">Privacy Policy</a>
      <a href="mailto:hey@aquamark.io">Contact Us</a>
    </div>
    <div>&copy; 2025 Aquamark. All rights reserved.</div>
  </footer>

<!-- Preserve URL parameters for all internal links -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const urlParams = window.location.search;
    const hashParams = window.location.hash;

    // List of internal paths to apply token preservation to
    const pathsToUpdate = ["/watermark.html", "/api.html", "/dashboard.html"];

    document.querySelectorAll("a[href]").forEach(link => {
      const href = link.getAttribute("href");
      if (href && pathsToUpdate.some(path => href.startsWith(path))) {
        const cleanHref = href.split('?')[0].split('#')[0];
        link.href = cleanHref + urlParams + hashParams;
      }
    });
  });
</script>

</body>
</html>
